extends ../../layouts/default.pug

block main
  h1(class="mb-4") #{pageTitle}

  .card.mb-3
    .card-header Danh sách đơn hàng
    .card-body
      .row

      table(
        class="table table-hover table-sm mt-3"
      )
        thead
          tr
            th STT
            th Mã đơn
            th Họ và tên
            th Số điện thoại
            th Chi tiết tour
            th Tổng đơn hàng
            th Trạng thái
            th Hành động

        tbody
          each item, index in tours
            tr 
              td #{index+1}
              td #{item.order_code}
              td #{item.customer_name}
              td #{item.customer_phone}
              td #{item.tour_details}
              td #{parseInt(item.total_amount).toLocaleString()}đ
              td
                if (item.status === "initial")
                  a(
                    href="javascript:;"
                    data-status=item.status
                    data-id = item.id 
                    button-change-status
                    class="badge badge-success"
                  ) Ban đầu
                else
                  a(
                    href="javascript:;"
                    data-status=item.status
                    data-id = item.id 
                    button-change-status
                    class="badge badge-danger"
                  ) Xác nhận
              td
                a(
                  class="btn btn-secondary btn-sm"
                  href=`/${prefixAdmin}/orders/detail/${item.id}`
                ) Chi tiết
                button(
                  class="btn btn-danger btn-sm ml-1"
                  button-delete
                  data-id=item.id
                ) Xóa

  form(
    action=""
    method="POST"
    id="form-delete-item"
    data-path=`/${prefixAdmin}/orders/delete`
  ) 

  form(
    action=""
    method="POST"
    id="form-change-status"
    data-path=`/${prefixAdmin}/orders/change-status`
  ) 